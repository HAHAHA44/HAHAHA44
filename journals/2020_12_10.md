---
title: Dec 10th, 2020
---

## ((5fcf506c-258b-438f-92ad-063071bf3c10))
## #bug 推流错误处理文档
## #idea SDK 模块设计思路。
### 举个例子，player 对象的封装。首先要做到普适性，就是只要给player正确的参数，最好是JS原生对象，这个player就可以使用，而不要依赖其他SDK封装的对象。
### Player 需要的方法：
####
#+BEGIN_SRC 

// 构造函数。
// new Player 的时候会执行这个函数来初始化 Player 对象实例。
// 提供的参数有: track, 需要进行播放的视频轨道。
// element, 容器元素。player 会完全占据这个容器。
constructor(track, element) {}
#+END_SRC
####
#+BEGIN_SRC 

// 播放
play() {}
#+END_SRC
####
#+BEGIN_SRC 

// 更新 player 中的 track。
// 要注意如果 player 是播放状态下还是在未播放状态
updateTrack(track) {}
#+END_SRC
####
#+BEGIN_SRC 

// 停止播放
stop() {}
#+END_SRC
####
#+BEGIN_SRC 

// 销毁 player，同时在 DOM 上移除添加的 player DOM
destroy() {}
#+END_SRC
### 在设计 player 这个模块的时候，需要考虑到，如何保证在任何情况下，外部调用上述这些 public 方法的时候，调用都是生效的，都能达到预期的效果。如果 player 与其他模块解耦做的很好的话，这里单元测试会很好写，为每个接口直接设计 case 来验证是否接口的功能符合预期。
### 但是，比如这两天就遇到了一个问题，在 iOS Safari 上有一个 player 相关的bug，设置 Track 必须要和 play 操作的间隔大于 2s。这个时候就需要对 player 这个对象做出一些改动，来确保 play 和 updateTrack 的间隔。
